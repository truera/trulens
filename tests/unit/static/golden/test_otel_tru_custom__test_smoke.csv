,record,event_id,record_attributes,record_type,resource_attributes,start_timestamp,timestamp,trace
0,"{'name': 'root', 'kind': 1, 'parent_span_id': '', 'status': 'STATUS_CODE_UNSET'}",6524263589525693085,"{'name': 'root', 'ai.observability.span_type': 'record_root', 'ai.observability.domain': 'module', 'ai.observability.app_name': 'default_app', 'ai.observability.app_version': 'base', 'ai.observability.record_id': '85e7fbe2-7e49-49f3-9513-1aa8a20558e7', 'ai.observability.run_name': 'test run', 'ai.observability.input_id': '456', 'ai.observability.record_root.app_name': 'default_app', 'ai.observability.record_root.app_version': 'base', 'ai.observability.record_root.record_id': '85e7fbe2-7e49-49f3-9513-1aa8a20558e7'}",EventRecordType.SPAN,"{'telemetry.sdk.language': 'python', 'telemetry.sdk.name': 'opentelemetry', 'telemetry.sdk.version': '1.28.2', 'service.name': 'trulens'}",2025-01-31 23:38:45.360512,2025-01-31 23:38:45.361545,"{'trace_id': '97241349686600116093801218998835773385', 'parent_id': '', 'span_id': '6524263589525693085'}"
1,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.respond_to_query', 'kind': 1, 'parent_span_id': '6524263589525693085', 'status': 'STATUS_CODE_UNSET'}",14739644098548365418,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.respond_to_query', 'ai.observability.span_type': 'main', 'ai.observability.domain': 'module', 'ai.observability.app_name': 'default_app', 'ai.observability.app_version': 'base', 'ai.observability.record_id': '85e7fbe2-7e49-49f3-9513-1aa8a20558e7', 'ai.observability.run_name': 'test run', 'ai.observability.input_id': '456', 'ai.observability.main.main_input': 'test', 'ai.observability.main.main_output': 'answer: nested: nested2: nested3', 'ai.observability.call.return': 'answer: nested: nested2: nested3', 'ai.observability.call.stack': '  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/bin/pytest"", line 8, in <module>\n    sys.exit(console_main())\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 201, in console_main\n    code = main()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 175, in main\n    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 330, in pytest_cmdline_main\n    return wrap_session(config, _main)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 283, in wrap_session\n    session.exitstatus = doit(config, session) or 0\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 337, in _main\n    config.hook.pytest_runtestloop(session=session)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 362, in pytest_runtestloop\n    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 113, in pytest_runtest_protocol\n    runtestprotocol(item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 132, in runtestprotocol\n    reports.append(call_and_report(item, ""call"", log))\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 241, in call_and_report\n    call = CallInfo.from_call(\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 341, in from_call\n    result: TResult | None = func()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 242, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 174, in pytest_runtest_call\n    item.runtest()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/unittest.py"", line 351, in runtest\n    testcase(result=self)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 678, in __call__\n    return self.run(*args, **kwds)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 623, in run\n    self._callTestMethod(testMethod)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 579, in _callTestMethod\n    if method() is not None:\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 63, in test_smoke\n    test_app.respond_to_query(""test"")\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 178, in sync_wrapper\n    next(ret)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 212, in convert_to_generator\n    _set_span_attributes(\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 109, in _set_span_attributes\n    set_function_call_attributes(span, ret, func_exception, all_kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/experimental/otel_tracing/core/span.py"", line 152, in set_function_call_attributes\n    span, SpanAttributes.CALL.STACK, ""\\n"".join(traceback.format_stack())\n', 'ai.observability.call.kwargs.query': 'test'}",EventRecordType.SPAN,"{'telemetry.sdk.language': 'python', 'telemetry.sdk.name': 'opentelemetry', 'telemetry.sdk.version': '1.28.2', 'service.name': 'trulens'}",2025-01-31 23:38:45.360549,2025-01-31 23:38:45.361537,"{'trace_id': '97241349686600116093801218998835773385', 'parent_id': '6524263589525693085', 'span_id': '14739644098548365418'}"
2,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.nested', 'kind': 1, 'parent_span_id': '14739644098548365418', 'status': 'STATUS_CODE_UNSET'}",1909202514329481593,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.nested', 'ai.observability.span_type': 'unknown', 'ai.observability.domain': 'module', 'ai.observability.app_name': 'default_app', 'ai.observability.app_version': 'base', 'ai.observability.record_id': '85e7fbe2-7e49-49f3-9513-1aa8a20558e7', 'ai.observability.run_name': 'test run', 'ai.observability.input_id': '456', 'ai.observability.call.return': 'nested: nested2: nested3', 'ai.observability.call.stack': '  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/bin/pytest"", line 8, in <module>\n    sys.exit(console_main())\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 201, in console_main\n    code = main()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 175, in main\n    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 330, in pytest_cmdline_main\n    return wrap_session(config, _main)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 283, in wrap_session\n    session.exitstatus = doit(config, session) or 0\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 337, in _main\n    config.hook.pytest_runtestloop(session=session)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 362, in pytest_runtestloop\n    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 113, in pytest_runtest_protocol\n    runtestprotocol(item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 132, in runtestprotocol\n    reports.append(call_and_report(item, ""call"", log))\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 241, in call_and_report\n    call = CallInfo.from_call(\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 341, in from_call\n    result: TResult | None = func()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 242, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 174, in pytest_runtest_call\n    item.runtest()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/unittest.py"", line 351, in runtest\n    testcase(result=self)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 678, in __call__\n    return self.run(*args, **kwds)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 623, in run\n    self._callTestMethod(testMethod)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 579, in _callTestMethod\n    if method() is not None:\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 63, in test_smoke\n    test_app.respond_to_query(""test"")\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 173, in sync_wrapper\n    if next(ret) == ""is_not_generator"":\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 193, in convert_to_generator\n    result = func(*args, **kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 18, in respond_to_query\n    return f""answer: {self.nested(query)}""\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 178, in sync_wrapper\n    next(ret)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 212, in convert_to_generator\n    _set_span_attributes(\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 109, in _set_span_attributes\n    set_function_call_attributes(span, ret, func_exception, all_kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/experimental/otel_tracing/core/span.py"", line 152, in set_function_call_attributes\n    span, SpanAttributes.CALL.STACK, ""\\n"".join(traceback.format_stack())\n', 'ai.observability.call.kwargs.query': 'test', 'ai.observability.unknown.nested_attr1': 'value1'}",EventRecordType.SPAN,"{'telemetry.sdk.language': 'python', 'telemetry.sdk.name': 'opentelemetry', 'telemetry.sdk.version': '1.28.2', 'service.name': 'trulens'}",2025-01-31 23:38:45.360564,2025-01-31 23:38:45.361414,"{'trace_id': '97241349686600116093801218998835773385', 'parent_id': '14739644098548365418', 'span_id': '1909202514329481593'}"
3,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.nested2', 'kind': 1, 'parent_span_id': '1909202514329481593', 'status': 'STATUS_CODE_UNSET'}",14154329688635638791,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.nested2', 'ai.observability.span_type': 'unknown', 'ai.observability.domain': 'module', 'ai.observability.app_name': 'default_app', 'ai.observability.app_version': 'base', 'ai.observability.record_id': '85e7fbe2-7e49-49f3-9513-1aa8a20558e7', 'ai.observability.run_name': 'test run', 'ai.observability.input_id': '456', 'ai.observability.call.return': 'nested2: nested3', 'ai.observability.call.stack': '  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/bin/pytest"", line 8, in <module>\n    sys.exit(console_main())\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 201, in console_main\n    code = main()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 175, in main\n    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 330, in pytest_cmdline_main\n    return wrap_session(config, _main)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 283, in wrap_session\n    session.exitstatus = doit(config, session) or 0\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 337, in _main\n    config.hook.pytest_runtestloop(session=session)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 362, in pytest_runtestloop\n    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 113, in pytest_runtest_protocol\n    runtestprotocol(item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 132, in runtestprotocol\n    reports.append(call_and_report(item, ""call"", log))\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 241, in call_and_report\n    call = CallInfo.from_call(\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 341, in from_call\n    result: TResult | None = func()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 242, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 174, in pytest_runtest_call\n    item.runtest()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/unittest.py"", line 351, in runtest\n    testcase(result=self)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 678, in __call__\n    return self.run(*args, **kwds)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 623, in run\n    self._callTestMethod(testMethod)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 579, in _callTestMethod\n    if method() is not None:\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 63, in test_smoke\n    test_app.respond_to_query(""test"")\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 173, in sync_wrapper\n    if next(ret) == ""is_not_generator"":\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 193, in convert_to_generator\n    result = func(*args, **kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 18, in respond_to_query\n    return f""answer: {self.nested(query)}""\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 173, in sync_wrapper\n    if next(ret) == ""is_not_generator"":\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 193, in convert_to_generator\n    result = func(*args, **kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 22, in nested\n    return f""nested: {self.nested2(query)}""\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 178, in sync_wrapper\n    next(ret)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 212, in convert_to_generator\n    _set_span_attributes(\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 109, in _set_span_attributes\n    set_function_call_attributes(span, ret, func_exception, all_kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/experimental/otel_tracing/core/span.py"", line 152, in set_function_call_attributes\n    span, SpanAttributes.CALL.STACK, ""\\n"".join(traceback.format_stack())\n', 'ai.observability.call.kwargs.query': 'test', 'ai.observability.unknown.nested2_ret': 'nested2: nested3', 'ai.observability.unknown.nested2_args[1]': 'test'}",EventRecordType.SPAN,"{'telemetry.sdk.language': 'python', 'telemetry.sdk.name': 'opentelemetry', 'telemetry.sdk.version': '1.28.2', 'service.name': 'trulens'}",2025-01-31 23:38:45.360576,2025-01-31 23:38:45.361292,"{'trace_id': '97241349686600116093801218998835773385', 'parent_id': '1909202514329481593', 'span_id': '14154329688635638791'}"
4,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.nested3', 'kind': 1, 'parent_span_id': '14154329688635638791', 'status': 'STATUS_CODE_UNSET'}",2009379037651613380,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.nested3', 'ai.observability.span_type': 'unknown', 'ai.observability.domain': 'module', 'ai.observability.app_name': 'default_app', 'ai.observability.app_version': 'base', 'ai.observability.record_id': '85e7fbe2-7e49-49f3-9513-1aa8a20558e7', 'ai.observability.run_name': 'test run', 'ai.observability.input_id': '456', 'ai.observability.call.return': 'nested3', 'ai.observability.call.stack': '  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/bin/pytest"", line 8, in <module>\n    sys.exit(console_main())\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 201, in console_main\n    code = main()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 175, in main\n    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 330, in pytest_cmdline_main\n    return wrap_session(config, _main)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 283, in wrap_session\n    session.exitstatus = doit(config, session) or 0\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 337, in _main\n    config.hook.pytest_runtestloop(session=session)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 362, in pytest_runtestloop\n    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 113, in pytest_runtest_protocol\n    runtestprotocol(item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 132, in runtestprotocol\n    reports.append(call_and_report(item, ""call"", log))\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 241, in call_and_report\n    call = CallInfo.from_call(\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 341, in from_call\n    result: TResult | None = func()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 242, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 174, in pytest_runtest_call\n    item.runtest()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/unittest.py"", line 351, in runtest\n    testcase(result=self)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 678, in __call__\n    return self.run(*args, **kwds)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 623, in run\n    self._callTestMethod(testMethod)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 579, in _callTestMethod\n    if method() is not None:\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 63, in test_smoke\n    test_app.respond_to_query(""test"")\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 173, in sync_wrapper\n    if next(ret) == ""is_not_generator"":\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 193, in convert_to_generator\n    result = func(*args, **kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 18, in respond_to_query\n    return f""answer: {self.nested(query)}""\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 173, in sync_wrapper\n    if next(ret) == ""is_not_generator"":\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 193, in convert_to_generator\n    result = func(*args, **kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 22, in nested\n    return f""nested: {self.nested2(query)}""\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 173, in sync_wrapper\n    if next(ret) == ""is_not_generator"":\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 193, in convert_to_generator\n    result = func(*args, **kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 34, in nested2\n    nested_result = self.nested3(query)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 178, in sync_wrapper\n    next(ret)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 212, in convert_to_generator\n    _set_span_attributes(\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 109, in _set_span_attributes\n    set_function_call_attributes(span, ret, func_exception, all_kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/experimental/otel_tracing/core/span.py"", line 152, in set_function_call_attributes\n    span, SpanAttributes.CALL.STACK, ""\\n"".join(traceback.format_stack())\n', 'ai.observability.call.kwargs.query': 'test', 'ai.observability.unknown.nested3_ret': 'nested3', 'ai.observability.unknown.selector_name': 'special', 'ai.observability.unknown.cows': 'moo'}",EventRecordType.SPAN,"{'telemetry.sdk.language': 'python', 'telemetry.sdk.name': 'opentelemetry', 'telemetry.sdk.version': '1.28.2', 'service.name': 'trulens'}",2025-01-31 23:38:45.360594,2025-01-31 23:38:45.361147,"{'trace_id': '97241349686600116093801218998835773385', 'parent_id': '14154329688635638791', 'span_id': '2009379037651613380'}"
5,"{'name': 'root', 'kind': 1, 'parent_span_id': '', 'status': 'STATUS_CODE_UNSET'}",11140160054495860115,"{'name': 'root', 'ai.observability.span_type': 'record_root', 'ai.observability.domain': 'module', 'ai.observability.app_name': 'default_app', 'ai.observability.app_version': 'base', 'ai.observability.record_id': '1a8ef522-0637-4d52-aeee-a3ec0e754def', 'ai.observability.record_root.app_name': 'default_app', 'ai.observability.record_root.app_version': 'base', 'ai.observability.record_root.record_id': '1a8ef522-0637-4d52-aeee-a3ec0e754def'}",EventRecordType.SPAN,"{'telemetry.sdk.language': 'python', 'telemetry.sdk.name': 'opentelemetry', 'telemetry.sdk.version': '1.28.2', 'service.name': 'trulens'}",2025-01-31 23:38:45.361601,2025-01-31 23:38:45.363187,"{'trace_id': '92796261559336203180553606171694373366', 'parent_id': '', 'span_id': '11140160054495860115'}"
6,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.respond_to_query', 'kind': 1, 'parent_span_id': '11140160054495860115', 'status': 'STATUS_CODE_UNSET'}",17679804072562876573,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.respond_to_query', 'ai.observability.span_type': 'main', 'ai.observability.domain': 'module', 'ai.observability.app_name': 'default_app', 'ai.observability.app_version': 'base', 'ai.observability.record_id': '1a8ef522-0637-4d52-aeee-a3ec0e754def', 'ai.observability.main.main_input': 'throw', 'ai.observability.main.main_output': 'answer: nested: nested2: ', 'ai.observability.call.return': 'answer: nested: nested2: ', 'ai.observability.call.stack': '  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/bin/pytest"", line 8, in <module>\n    sys.exit(console_main())\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 201, in console_main\n    code = main()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 175, in main\n    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 330, in pytest_cmdline_main\n    return wrap_session(config, _main)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 283, in wrap_session\n    session.exitstatus = doit(config, session) or 0\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 337, in _main\n    config.hook.pytest_runtestloop(session=session)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 362, in pytest_runtestloop\n    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 113, in pytest_runtest_protocol\n    runtestprotocol(item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 132, in runtestprotocol\n    reports.append(call_and_report(item, ""call"", log))\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 241, in call_and_report\n    call = CallInfo.from_call(\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 341, in from_call\n    result: TResult | None = func()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 242, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 174, in pytest_runtest_call\n    item.runtest()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/unittest.py"", line 351, in runtest\n    testcase(result=self)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 678, in __call__\n    return self.run(*args, **kwds)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 623, in run\n    self._callTestMethod(testMethod)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 579, in _callTestMethod\n    if method() is not None:\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 65, in test_smoke\n    test_app.respond_to_query(""throw"")\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 178, in sync_wrapper\n    next(ret)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 212, in convert_to_generator\n    _set_span_attributes(\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 109, in _set_span_attributes\n    set_function_call_attributes(span, ret, func_exception, all_kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/experimental/otel_tracing/core/span.py"", line 152, in set_function_call_attributes\n    span, SpanAttributes.CALL.STACK, ""\\n"".join(traceback.format_stack())\n', 'ai.observability.call.kwargs.query': 'throw'}",EventRecordType.SPAN,"{'telemetry.sdk.language': 'python', 'telemetry.sdk.name': 'opentelemetry', 'telemetry.sdk.version': '1.28.2', 'service.name': 'trulens'}",2025-01-31 23:38:45.361623,2025-01-31 23:38:45.363179,"{'trace_id': '92796261559336203180553606171694373366', 'parent_id': '11140160054495860115', 'span_id': '17679804072562876573'}"
7,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.nested', 'kind': 1, 'parent_span_id': '17679804072562876573', 'status': 'STATUS_CODE_UNSET'}",7177183477142591,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.nested', 'ai.observability.span_type': 'unknown', 'ai.observability.domain': 'module', 'ai.observability.app_name': 'default_app', 'ai.observability.app_version': 'base', 'ai.observability.record_id': '1a8ef522-0637-4d52-aeee-a3ec0e754def', 'ai.observability.call.return': 'nested: nested2: ', 'ai.observability.call.stack': '  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/bin/pytest"", line 8, in <module>\n    sys.exit(console_main())\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 201, in console_main\n    code = main()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 175, in main\n    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 330, in pytest_cmdline_main\n    return wrap_session(config, _main)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 283, in wrap_session\n    session.exitstatus = doit(config, session) or 0\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 337, in _main\n    config.hook.pytest_runtestloop(session=session)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 362, in pytest_runtestloop\n    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 113, in pytest_runtest_protocol\n    runtestprotocol(item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 132, in runtestprotocol\n    reports.append(call_and_report(item, ""call"", log))\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 241, in call_and_report\n    call = CallInfo.from_call(\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 341, in from_call\n    result: TResult | None = func()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 242, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 174, in pytest_runtest_call\n    item.runtest()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/unittest.py"", line 351, in runtest\n    testcase(result=self)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 678, in __call__\n    return self.run(*args, **kwds)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 623, in run\n    self._callTestMethod(testMethod)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 579, in _callTestMethod\n    if method() is not None:\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 65, in test_smoke\n    test_app.respond_to_query(""throw"")\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 173, in sync_wrapper\n    if next(ret) == ""is_not_generator"":\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 193, in convert_to_generator\n    result = func(*args, **kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 18, in respond_to_query\n    return f""answer: {self.nested(query)}""\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 178, in sync_wrapper\n    next(ret)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 212, in convert_to_generator\n    _set_span_attributes(\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 109, in _set_span_attributes\n    set_function_call_attributes(span, ret, func_exception, all_kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/experimental/otel_tracing/core/span.py"", line 152, in set_function_call_attributes\n    span, SpanAttributes.CALL.STACK, ""\\n"".join(traceback.format_stack())\n', 'ai.observability.call.kwargs.query': 'throw', 'ai.observability.unknown.nested_attr1': 'value1'}",EventRecordType.SPAN,"{'telemetry.sdk.language': 'python', 'telemetry.sdk.name': 'opentelemetry', 'telemetry.sdk.version': '1.28.2', 'service.name': 'trulens'}",2025-01-31 23:38:45.361634,2025-01-31 23:38:45.363066,"{'trace_id': '92796261559336203180553606171694373366', 'parent_id': '17679804072562876573', 'span_id': '7177183477142591'}"
8,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.nested2', 'kind': 1, 'parent_span_id': '7177183477142591', 'status': 'STATUS_CODE_UNSET'}",926091526231494179,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.nested2', 'ai.observability.span_type': 'unknown', 'ai.observability.domain': 'module', 'ai.observability.app_name': 'default_app', 'ai.observability.app_version': 'base', 'ai.observability.record_id': '1a8ef522-0637-4d52-aeee-a3ec0e754def', 'ai.observability.call.return': 'nested2: ', 'ai.observability.call.stack': '  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/bin/pytest"", line 8, in <module>\n    sys.exit(console_main())\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 201, in console_main\n    code = main()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 175, in main\n    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 330, in pytest_cmdline_main\n    return wrap_session(config, _main)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 283, in wrap_session\n    session.exitstatus = doit(config, session) or 0\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 337, in _main\n    config.hook.pytest_runtestloop(session=session)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 362, in pytest_runtestloop\n    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 113, in pytest_runtest_protocol\n    runtestprotocol(item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 132, in runtestprotocol\n    reports.append(call_and_report(item, ""call"", log))\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 241, in call_and_report\n    call = CallInfo.from_call(\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 341, in from_call\n    result: TResult | None = func()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 242, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 174, in pytest_runtest_call\n    item.runtest()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/unittest.py"", line 351, in runtest\n    testcase(result=self)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 678, in __call__\n    return self.run(*args, **kwds)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 623, in run\n    self._callTestMethod(testMethod)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 579, in _callTestMethod\n    if method() is not None:\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 65, in test_smoke\n    test_app.respond_to_query(""throw"")\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 173, in sync_wrapper\n    if next(ret) == ""is_not_generator"":\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 193, in convert_to_generator\n    result = func(*args, **kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 18, in respond_to_query\n    return f""answer: {self.nested(query)}""\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 173, in sync_wrapper\n    if next(ret) == ""is_not_generator"":\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 193, in convert_to_generator\n    result = func(*args, **kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 22, in nested\n    return f""nested: {self.nested2(query)}""\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 178, in sync_wrapper\n    next(ret)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 212, in convert_to_generator\n    _set_span_attributes(\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 109, in _set_span_attributes\n    set_function_call_attributes(span, ret, func_exception, all_kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/experimental/otel_tracing/core/span.py"", line 152, in set_function_call_attributes\n    span, SpanAttributes.CALL.STACK, ""\\n"".join(traceback.format_stack())\n', 'ai.observability.call.kwargs.query': 'throw', 'ai.observability.unknown.nested2_ret': 'nested2: ', 'ai.observability.unknown.nested2_args[1]': 'throw'}",EventRecordType.SPAN,"{'telemetry.sdk.language': 'python', 'telemetry.sdk.name': 'opentelemetry', 'telemetry.sdk.version': '1.28.2', 'service.name': 'trulens'}",2025-01-31 23:38:45.361644,2025-01-31 23:38:45.362963,"{'trace_id': '92796261559336203180553606171694373366', 'parent_id': '7177183477142591', 'span_id': '926091526231494179'}"
9,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.nested3', 'kind': 1, 'parent_span_id': '926091526231494179', 'status': 'STATUS_CODE_ERROR'}",12819988062635040828,"{'name': 'tests.unit.test_otel_tru_custom.TestApp.nested3', 'ai.observability.span_type': 'unknown', 'ai.observability.domain': 'module', 'ai.observability.app_name': 'default_app', 'ai.observability.app_version': 'base', 'ai.observability.record_id': '1a8ef522-0637-4d52-aeee-a3ec0e754def', 'ai.observability.call.error': 'nested3 exception', 'ai.observability.call.stack': '  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/bin/pytest"", line 8, in <module>\n    sys.exit(console_main())\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 201, in console_main\n    code = main()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/config/__init__.py"", line 175, in main\n    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 330, in pytest_cmdline_main\n    return wrap_session(config, _main)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 283, in wrap_session\n    session.exitstatus = doit(config, session) or 0\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 337, in _main\n    config.hook.pytest_runtestloop(session=session)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/main.py"", line 362, in pytest_runtestloop\n    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 113, in pytest_runtest_protocol\n    runtestprotocol(item, nextitem=nextitem)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 132, in runtestprotocol\n    reports.append(call_and_report(item, ""call"", log))\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 241, in call_and_report\n    call = CallInfo.from_call(\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 341, in from_call\n    result: TResult | None = func()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 242, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_hooks.py"", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_manager.py"", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/pluggy/_callers.py"", line 103, in _multicall\n    res = hook_impl.function(*args)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/runner.py"", line 174, in pytest_runtest_call\n    item.runtest()\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/site-packages/_pytest/unittest.py"", line 351, in runtest\n    testcase(result=self)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 678, in __call__\n    return self.run(*args, **kwds)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 623, in run\n    self._callTestMethod(testMethod)\n\n  File ""/Users/dkurokawa/miniconda3/envs/trulens_3_11/lib/python3.11/unittest/case.py"", line 579, in _callTestMethod\n    if method() is not None:\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 65, in test_smoke\n    test_app.respond_to_query(""throw"")\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 173, in sync_wrapper\n    if next(ret) == ""is_not_generator"":\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 193, in convert_to_generator\n    result = func(*args, **kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 18, in respond_to_query\n    return f""answer: {self.nested(query)}""\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 173, in sync_wrapper\n    if next(ret) == ""is_not_generator"":\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 193, in convert_to_generator\n    result = func(*args, **kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 22, in nested\n    return f""nested: {self.nested2(query)}""\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 173, in sync_wrapper\n    if next(ret) == ""is_not_generator"":\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 193, in convert_to_generator\n    result = func(*args, **kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/tests/unit/test_otel_tru_custom.py"", line 34, in nested2\n    nested_result = self.nested3(query)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 173, in sync_wrapper\n    if next(ret) == ""is_not_generator"":\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 212, in convert_to_generator\n    _set_span_attributes(\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/core/otel/instrument.py"", line 109, in _set_span_attributes\n    set_function_call_attributes(span, ret, func_exception, all_kwargs)\n\n  File ""/Users/dkurokawa/Work/code/trulens/trulens/src/core/trulens/experimental/otel_tracing/core/span.py"", line 152, in set_function_call_attributes\n    span, SpanAttributes.CALL.STACK, ""\\n"".join(traceback.format_stack())\n', 'ai.observability.call.kwargs.query': 'throw', 'ai.observability.unknown.nested3_ex': ['nested3 exception'], 'ai.observability.unknown.selector_name': 'special', 'ai.observability.unknown.cows': 'moo'}",EventRecordType.SPAN,"{'telemetry.sdk.language': 'python', 'telemetry.sdk.name': 'opentelemetry', 'telemetry.sdk.version': '1.28.2', 'service.name': 'trulens'}",2025-01-31 23:38:45.361655,2025-01-31 23:38:45.362839,"{'trace_id': '92796261559336203180553606171694373366', 'parent_id': '926091526231494179', 'span_id': '12819988062635040828'}"
